pkgname=device-zipit-z2
pkgver=1
pkgrel=1
pkgdesc="Zipit Z2"
url="https://github.com/postmarketOS"
arch="noarch"
license="MIT"
depends="linux-zipit-z2 uboot-tools"
makedepends="uboot-tools"
install="$pkgname.post-install"
subpackages=""
source="deviceinfo uboot-script.cmd $install"
options="!check"

build() {
	mkimage -A arm -O linux -T script -C none -a 0 -e 0 -n postmarketos -d "$srcdir/uboot-script.cmd" "$srcdir/boot.scr"
	return 0
}

package() {
	install -D -m644 "$srcdir"/deviceinfo \
		"$pkgdir"/etc/deviceinfo
	install -D -m644 "$srcdir"/boot.scr \
		"$pkgdir"/boot/boot.scr
}

sha512sums="4efa28cfb35b0ceb783f15fbcf05d7302690d2d767ec7b87578741ccd52988fdc2095baf2a5ce66b964fb0cb151d05238f223a60a9a52c3670bd7b20ead2862a  deviceinfo
66dfff0d87cbe7c98162c941704c4d6009c70612a59bfb88c6249638b5215ef0a8ec46932621ccafb6d6050e52e950e5c5d61aa158b9df4557a61670509c47ba  uboot-script.cmd
f0fe5e56e62c131580c029a406f6701deffdaf2172a2fc755601d979f3629de4ff2b291718207f5a3955bbb99c5a60ea451d0ebb76ef575e7b4572b3d4449660  device-zipit-z2.post-install"
